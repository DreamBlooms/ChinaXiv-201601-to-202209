# Mini-GWAC控制系统的故障诊断专家系统

付夏楠1,2,3，黄垒2,，魏建彦2,3（1.中国科学院大学，北京100049；2.中国科学院国家天文台，北京100012；3.中国科学院空间天文与技术重点实验室，北京100012)

摘要：地基广角相机阵是中法合作空间多波段变源监视器天文卫星的地基观测设备，Mini-GWAC是其预研和补充项目。针对Mini-GWAC望远镜阵列，从故障诊断方法、技术设计方案和故障诊断研究平台等方面展开，详细叙述了故障诊断系统的研究及设计过程。该系统基于Mini-GWAC望远镜平台，采用专家系统理论和故障树分析相结合的方法开展故障诊断专家系统的研究。研究成果对提高望远镜的可靠性，降低维护成本，提高观测效率有重要意义，同时为实现在其他望远镜上的应用增加技术积累。

关键词：故障诊断；故障树；专家系统；分布式设计中图分类号：TP311 文献标识码：A 文章编号：1672-7673(2016)03-0366-07

空间多波段变源监视器（Space-based multi-band astronomical Variable Objects Monitor，SVOM）是中法双方合作的天文科学卫星，科学目标是发现和观测伽玛暴，研究伽玛暴的辐射特性和爆发机制，以及利用伽玛暴研究早期宇宙和暗能量。地基广角相机阵(Ground-based Wide Angle Cameras，GWAC)是空间多波段变源监视器天文卫星的地基观测设备，由36个广角相机组成，主要科学目标是监测伽玛射线暴的光学瞬时辐射和其它剧烈变换的天体，在同类型大视场光学巡天项目中处于国际领先地位。地基广角相机阵为空间多波段变源监视器探测伽玛暴而设计，其前所未有的能力为中国天文界的许多科研小组提供了研究伽玛暴以外的众多特别有趣的前沿和传统天文课题的机遇。Mini-GWAC是地基广角相机阵的预研系统，共有6个赤道仪，12套望远镜及12台CCD，目前已在国家天文台兴隆基地投入试运行，现场如图1。

Mini-GWAC的观测对象是随机发生的瞬时天文现象。由于望远镜处于被动观测状态，因此要求它有足够的时间和空间覆盖。设备的故障可能导致错过一次发现这种天文现象的宝贵机会。如何有效了解和掌握系统的实时状态，如何在故障发生前提供预警、故障发生后实时定位故障源并快速消除故障，如何提高系统的可维护性，是这类阵列式望远镜迫切需要解决的问题。面对这类有多设备、多接口、多任务特点的庞大系统，传统的基于专家在线处理的望远镜系统故障诊断方式显得力不从心。因此急需建设一套智能化故障诊断系统，最大限度地减少科学损失。

故障诊断是对系统运行状态和异常情况做出判断，并根据诊断做出判断，为系统故障恢复提供依据，对于提高设备的智能化程度、提高可维护性、保障设备的安全可靠运行起到不可替代的作用，并可获得很大的经济和社会效益。相较于其他领域的发展，天文领域的望远镜控制系统故障诊断技术在世界范围内起步较晚，美国和澳大利亚在20世纪90年代初，分别开展了望远镜控制系统故障诊断技术的研究。1990年4月，美国发射了哈勃太空望远镜，随后的应用中发现对于望远镜控制系统故障的检测和排除存在高昂的物质成本和时间成本，为了降低远程望远镜的技术维修问题，同时也为美国南极望远镜故障维修和“月球定居点”计划提供技术支持，美国太空总署艾姆斯研究中心（NASA

Ames Research Center）和美国 AutoScope 公司合作开展对望远镜控制系统（Telescope Control System，TCS)故障诊断技术的研究[1]，并把研究成果首先应用于哈勃空间望远镜。1994 年 RobertLandau 在澳大利亚望远镜（Australia Telescope)上建立了智能故障诊断系统，该系统能够接收并存储望远镜数据，经过分析处理后将其对应到已知的故障模式，实现故障诊断[2]。国内在望远镜故障诊断的研究方面已取得了一些成果。文[3]专家提出了把现代信号处理技术的谱分析应用到天文望远镜的故障分析上，基于频谱分析了摩擦驱动实验装置的振动信号，论证了频谱分析能很好地提取振动信号的频率特征，并判断出故障源。文[4]提出了 $5 0 0 \mathrm { m }$ 口径球面射电望远镜(Five hundred meters Aperture SphericalRadio Telescope，FAST)基于索应力监测和变位节点坐标监测的故障诊断方法，可有效对望远镜主动反射面结构进行故障诊断，其诊断结果具有很高的精度，可用于指导故障后的结构维修。

![](images/f885e9eba5084ee6a09a160679cec56e6a0d8a1246b98d8ca611225ea40ba639.jpg)  
图1Mini-GWAC望远镜阵列 Fig.1Mini-GWAC telescope array

在望远镜故障诊断技术的应用方面，国内呈现发展的态势[5-6]，但系统化投入应用的案例仍然很少。本项目的研究成果将有效提高 Mini-GWAC 望远镜的可靠性，减少故障损失时间，降低维护成本，提高观测效率，同时，研究成果具有借鉴意义，为实现该系统在其它望远镜上的应用打下基础。

# 故障诊断方法选择

# 1. 1 故障诊断方法

以传感器技术、现代测试技术、计算机技术和人工智能技术的快速发展为基础，故障诊断专家系统得到了飞速发展，已经广泛应用在各个领域。传统的分类思想一般将故障诊断方法划分为基于数学模型的方法、基于知识的方法和基于信号处理的方法三大类。还有一种更系统的分类方法是整体上将其分为定性分析和定量分析两大类[7]。定性分析方法具有建模简单，结果易于理解和应用范围广等特点，但当系统比较复杂时，这类方法的实施过程变得比较复杂，而且诊断正确性不高，效率低下。定量分析方法利用对系统内部的深层认识，诊断结果更加精确高效，但是往往依赖于被诊断对象精确的数学模型，而且需要大量的样本数据，其诊断精度与样本的完备性有很大关系。

故障树分析(Fault Tree Analysis，FTA)是美国贝尔电报公司于1962年开发的分析设备可靠性和安全性的一种重要方法，也是故障诊断技术中的主要分析方法之一，其特点在于形象、直观、清晰、逻辑性强。故障树是一种基于布尔代数的树形数据结构，它用事件符号、逻辑门符号和转移符号描述系统中各种事件之间的因果关系。故障树的根代表系统，也称作故障树的顶事件；子树代表故障事件，也称作中间事件；叶子节点代表故障点或者最终的故障原因，也称作底事件；节点代表故障事件之间的逻辑关系。故障树的建立过程是在熟悉系统的基础上，从顶事件出发，依据各事件内在的逻辑关系，逐级分析故障原因，并逐级生成故障树，直到延伸到故障的最终原因，即基本事件。

故障树是定性与定量相结合的分析方法，定性分析即遍历导致顶事件发生的所有可能的底事件，定量分析主要有两方面的含义：一是由底事件的发生概率求出顶事件的发生概率；二是进行底事件重要度和灵敏度的分析，并根据重要度的大小制定故障诊断和维修的优先级，同时根据灵敏度，优先改善可靠性相对较低的故障点的相关数据。

# 1.2天文望远镜控制系统故障诊断方法

天文望远镜是综合应用了计算机技术、电子技术、自动控制技术、传感器技术等各项技术的系统[8-9]。对于这样一个复杂的控制系统，要想获得精确的故障诊断数学模型十分困难。因此，天文望远镜故障诊断基本方法拟采用基于知识规则推理的故障诊断方法，并结合故障树数据结构方法，实现对望远镜控制系统的故障诊断。该方法的特点在于通过充分利用天文望远镜专业性知识和天文学家、技术支撑人员、观测助手的经验性知识，建立故障诊断知识库，并借助故障树的方式，形成合理的望远镜故障推理策略，最后在状态监测和处理的基础上，完成故障诊断过程。

# 2技术设计方案

对于 Mini-GWAC望远镜阵列而言，控制系统可分为望远镜赤道仪控制系统、CCD控制系统、自动调焦控制系统、圆顶控制系统等几个子系统。本文对每一个子系统按照模块化的设计思想进行研究设计，并通过物理的、逻辑的方法进行整合，形成一个完备的望远镜控制系统信息监测网络。监测网络的每一个节点之间相互独立，互不干扰，每个节点监测方法简单，可靠性高，从而构成一个高可靠性的望远镜状态信息监测系统，在此基础上，通过合理的故障推理策略，最终完成故障诊断的过程。

# 2.1 结构设计方法

望远镜控制系统故障诊断专家系统主要包括望远镜知识库、推理机、望远镜数据库和人机接口四大部分，专家系统的总体结构如图2。

![](images/4fc68f57f8ecc1c0633ae09445950025689bcf1140fb93f976fe0b2e930bded5.jpg)  
图2故障诊断体系  
Fig.2Fault diagnosis system

其中，望远镜知识库是建立故障诊断系统所需的结构化知识集群，包括两部分内容，一是望远镜故障诊断领域中的通用性知识，包括基础知识、专业知识和经验知识；二是启发性知识，包括望远镜故障类型、故障边界条件和可能的故障原因。数据库是推理机的信息和数据来源，存储望远镜的实时状态数据。推理机是故障诊断系统中的组织控制机构，利用已发生的事实记录和知识库中的相关知识集合，按照一定的推理策略进行推理，以达到要求的目标。推理机包含解决问题的策略和推理方法，接收从数据库传输的信息，调用知识库中的相关知识对信息进行相应的处理，并将处理结果送往人机界面或其他结构。人机接口是故障诊断的外部软件界面，是用户与控制系统传递、交换信息的重要媒介。

由于知识的有效组织是望远镜故障诊断系统能够灵活应用的必要条件，同时考虑到Mini-GWAC包含多个子系统，为此知识库采用模块化设计方法，即把知识总库分成若干相互独立的多级知识子库。以其中一台望远镜为例，知识库包含赤道仪知识库、CCD控制知识库、自动调焦知识库和圆顶控制知识库等，每个子知识库之间相互关联又相对独立。这种分布式的组织方式有利于数据的采集和汇总，数据库可按照模块化单元分类汇总望远镜的信息和数据，从而形成Mini-GWAC系统总体所需的知识库资源。

# 2.2故障诊断系统推理策略设计

望远镜故障推理由专家系统结构中的推理机完成，故障诊断系统推理策略如图3。

![](images/d094bfa1c991bbe683175ed54f69373eb7b0ddbfb11e113fecf9d4f416270283.jpg)  
图3故障诊断策略  
Fig.3Fault diagnosis strategy

故障诊断策略是望远镜故障诊断专家系统的组织控制机构，利用望远镜的各级传感器采集的望远镜各项状态监测数据和知识库中的各种相关知识集合，按照一定的推理策略进行推理，以查找故障源。诊断策略包含故障推理方法和故障排除措施，对于Mini-GWAC这样复杂的大系统，还包含诊断策略本身的结构优化和设计。由于望远镜专家系统知识库存在确定性知识和非确定性知识（模糊性知识），望远镜故障推理策略可以采取状态链推理和模糊推理相结合的方法。

# 3故障诊断系统研究平台

以国家天文台空间科学部月基光学望远镜组安放在兴隆观测基地的Mini-GWAC望远镜阵列为平台，开展对天文望远镜控制系统故障诊断专家系统的实验和研究工作。

# 3.1 系统结构设计

Mini-GWAC为多望远镜阵列，控制系统采用分别控制、集中管理的方式，相应地，故障树的设计也遵循了分布式的思想。Mini-GWAC 望远镜系统可分为赤道仪控制系统、CCD控制系统、自动调焦系统和圆顶控制系统，各子系统需监测的数据或信息如表1。

表1系统过程监测示例  
Table 1Monitoring example of system process   

<html><body><table><tr><td>望远镜子系统</td><td>系统过程监测数据</td></tr><tr><td>赤道仪控制系统</td><td>赤经、赤纬轴速度，运行方向，电机电流，轴角，限位状态，驱动器日志文件记录信息</td></tr><tr><td>CCD 控制系统</td><td>CCD服务器、CCD网络通讯</td></tr><tr><td>自动调焦系统</td><td>调焦电机电源，调焦状态，调焦结果</td></tr><tr><td>圆顶控制系统</td><td>圆顶运行电流，圆顶运行速度及方向</td></tr></table></body></html>

# 3.2赤道仪故障树设计

在将望远镜系统进行分布式模块化设计后，每个子系统的故障诊断过程具有阶段性，可以大致分为三个过程：系统开机自检、过程监测诊断、系统退出前自检。以赤道仪系统为例，其故障树设计如图4。

![](images/5fd615451e4890b06672e103c1449816d99fcf17851ed90a2b42b56e9201b47e.jpg)  
图4Mini-GWAC望远镜赤道仪故障树设计  
Fig.4Fault treedesign of a single telescope of Mini-GWAC

按照故障诊断的阶段性，故障诊断的具体过程如下：

# (1)开机自检

在系统的开机自检环节，故障诊断专家系统主要对控制系统的初始状态进行检测，对异常情况做出相应判断并自动给出诊断结果。控制系统的初始状态表征在系统进入后、运行前的状态，通过现场传感器以及控制器、智能电源模块等获取相关状态信息，通过系统的比较环节与推理逻辑，判断当前状态信息的合法性，从而确保控制系统以良好的状态投入运行。

# (2)系统过程监测诊断

望远镜开始运行后，专家系统随机进入实时在线过程监测。过程监测的主要对象为望远镜运行时的状态量以及过程量，如望远镜运行状态、转动方向、运行速度、限位状态等。过程监测的目的是准确地对过程故障行为进行描述，具有准确性和实时性。

# (3)系统退出前自检

关机前需要确认设备状态，如果望远镜未完成复位，则需要定位原因，并确保观测助手离开圆顶后设备的安全。

经过上述3个主要步骤的定性和定量分析，发现故障树根节点故障概率超过预定目标时，如果是评价系统的安全可靠性，需要研究制订降低和防范故障发生的有效措施；如果是检修决策，则需要研

究处理故障应采取的最有效的检修方式。

另外，故障树具有可扩展的特点，随着知识库的完善和推理策略的优化，故障树可以继续生长或者修剪，以更好地完成对状态的监测和故障的诊断，为设备维护和改进提供依据。

# 3.3工程设计方法

故障诊断专家系统总体上采用分布式架构，上位机为望远镜控制计算机，下位机为各个子系统控制器。关于系统的状态采集和处理，主要通过按照相关硬件和从中心数据库获取数据的方式，实现对望远镜状态相关信息的采集和处理，如电流、电压、望远镜转速以及其他的开关量和模拟量信号等。

具体来说，硬件系统的设计主要包括传感器的选型及安装，以及数据服务器和前端采集控制器的配置，还包括接口协议的开发。软件系统将采用LabVIEW作为专家系统的软件开发平台，LabVIEW广泛用于测试和控制，其图形化的编程和显示方式也适合系统状态监测和故障的显示。关于故障信息的处理，故障信息将和数据库产生对接，同时，也以日志文件记录的方式存储在本地计算机，方便查看和分析。故障发生前的预警信息和故障发生后的现象将展示在Mini-GWAC系统的展示平台，方便现场的观测人员及时查看和处理。

# 4结论

天文望远镜控制系统是一种综合的技术和知识应用系统，合理有效的故障诊断专家系统对于提高望远镜的可靠性、可维护性，进而提高天文观测的效率和质量具有重要的意义，是控制系统能安全、高效运行的重要保障。对于Mini-GWAC望远镜控制系统，建立故障诊断系统的特色与创新之处体现在以下3方面：

(1)系统安全：Mini-GWAC望远镜由多个不同的系统组成，结构较为复杂，在日常操作、管理上具有较大的难度。故障诊断系统覆盖性较好的系统状态监测、显示以及智能化的诊断过程，提高了系统的可靠性、可维护性和易用性，保证系统安全运行并节省人力物力成本。(2)全自动控制：目前国内远程望远镜发展迅速，已经成为许多望远镜台站的发展方向。对于一台无人值守的望远镜或者空间望远镜，如何实时、全面了解和监测望远镜系统的运行状态，以及如何在望远镜控制系统发生故障时迅速找到故障点，望远镜控制系统故障诊断专家系统为此提供了有力的技术保障和支持。

(3)技术积累：故障诊断技术在国内望远镜领域系统化的应用较少，本项目的研究具有借鉴意义，为该技术在其他天文望远镜系统上的推广和应用增加必要的技术积累。

致谢：感谢魏建彦老师和黄垒老师在我学习、研究、编程以及实验过程中的指导和帮助，使我少走了很多弯路。同时感谢中国科学院国家天文台SVOM项目组其他老师和同学的帮助，感谢兴隆观测基地成员的大力支持。

# 参考文献：

[1] Monahan C M,Patterson-Hine F A，Iverson D L. Automated telescope monitoring and diagnosis[C]// The Astronomical Society of the Pacific Conference Series.1995：120-128.  
[2] Landau R.Intelligent fault diagnosis at the Australia telescope ［C］//Proceedings of theAstronomical Society of Australia. 1994：180-187.  
[3] 何秋会，李国平．基于频谱分析的天文望远镜跟踪实验系统故障诊断［J].振动与冲击，2005，24(1): $4 1 - 4 4 + 5$ ：He Qiuhui，Li Guoping. Fault diagnosis of the pilot tracking system of astronomical telescope byfrequency analysis［J]. Journal of Vibration and Shock，2OO5，24（1）： $4 1 - 4 4 + 5$   
[4] 金晓飞，范峰，钱宏亮，等.巨型射电望远镜（FAST）主动反射面结构故障诊断［J]．土木工程学报，2010，43(6)：18-25.Jin Xiaofei，Fan feng，Qian Hongliang，et al. Fault diagnosis of cable-net structure supportingactive reflector of large radio telescope-FAST［J]. China Civil Engineering Journal，2010，43(6): 18-25.  
[5] Liu Jiajing，Luo Mingcheng，Tang Pengyi，et al. Study on fault diagnose expert system for largeastronomy telescope [C]// Proceedings of the SPIE.2014:1-5.  
[6] 罗明诚.大型望远镜控制系统中的故障处理系统的设计［D].合肥：中国科学技术大学，2014.  
[7] 周东华，胡艳艳.动态系统的故障诊断技术［J]．自动化学报，2009，35(6)：748-758.Zhou Donghua，Hu Yanyan，et al. Fault diagnosis techniques for dynamic systems ［J].ActaAutomatica Sinica，2009，35(6) : 748-758.  
[8] 黄垒，魏建彦，姜晓军，等.基于PMAC的天文望远镜控制系统研究及应用［J].天文研究与技术，2015，12(1)：44-53.Huang Lei，Wei Jianyan，Jiang Xiaojun，et al. A study of a PMAC-based astronomical-telescopecontrol system and its application [J].Astronomical Research & Technology，2015，12(1）:44-53.  
[9] 陆栋宁，黄垒，陈颖为，等. $8 5 ~ \mathrm { c m }$ 天文望远镜圆顶和天窗自动化系统研制［J].天文研究与技术——国家天文台台刊，2008，5(4)：386-391.Lu Dongning，Huang Lei，Chen Yingwei，et al. Research and development of the dome/slitcontrol system for the $8 5 \mathrm { c m }$ reflector of NAOC-BNU ［J].Astronomical Research & Technology-Publications of National Astronomical Observatories of China，2008，5(4）：386-391.

# The Fault Diagnosis Expert System of Mini-GWAC

Fu Xia'nan $^ { 1 , 2 , 3 }$ ， Huang Lei $^ { 2 , 3 }$ ，Wei Jianyan $^ { 2 , 3 }$ (1.Universityfsecadeofies，eigo9i；tioalstroicalOseators，secade， Beijing 10ool2,China；3.Key Laboratory of Space Astronomy and Technology，National Astronomical Observatories, Chinese Academy of Sciences，Beijing 1Ooo12,China，Email：huangl@nao.cas.cn)

Abstract:GWAC（Ground-based Wide Angle Cameras）is the ground-based observation instruments of thesino-french cooperation SVOM astronomical satellite. Mini-GWAC is the pre-research project and supplement of GWAC.From the aspects of fault diagnosis methods，technical design plan and fault diagnosis platform，this paper describes the research and design process of fault diagnosis system in detail.Based on Mini-GWAC，we combine expert system theory and fault diagnosis analysis and use them to study the fault diagnosis expert system.Research results of this fault diagnosis system show that it can significantly improve the reliabilityof telescopes，reduce maintenance cost，improve the eficiency of observation and ofer technical experience for application to other telescopes.

Key words: Fault diagnosis ；Fault tree；Expert system；Distributed design