# 利用惯性传感器和AdaBoost算法的步态识别方法‘

杨叶梅1，陈新²

(1．福建师范大学协和学院，福州 350000;2.福州大学 物理与信息工程学院，福州 350116)

摘要：针对现有方法在步态识别方面存在的动作信号分割、传感器方向不一致和相似动作识别精度不高等缺点，提出一种基于惯性传感器和AdaBoost算法的步态动作识别方法。首先，基于尺度空间技术，提出了一种鲁棒的步态检测方法将信号分为动作样本，以此来应对动作速度或强度的剧烈变化；然后，应用定位补偿匹配算法纠正传感器的倾斜，从而解决了传感器方向不一致的问题；最后，为了提高识别精度，基于AdaBoost算法自适应选取动作特征，再进行判别分析完成识别。对5个相似步态动作类进行识别实验，结果表明提出的算法具有较高的准确性。

关键词：步态识别；惯性传感器；AdaBoost算法；尺度空间计数；定位补偿匹配算法 中图分类号：TP391.41 doi: 10.3969/j.issn.1001-3695.2017.11.0777

# Gait recognition based on inertial sensor and AdaBoost algorithm

Yang Yemei1, Chen Xin² (1.CollegeofConcord UniversityFujianNrmalUniversityFuzhou35o,China;2.CoegeofPhysics&Inforation Engineering,Fuzhou University,Fuzhou 350116,China)

Abstract:Iniewofthedisadvantagesofcurrentmethods ingaitrcognition,suchasmotionsignalsegmentation,incosistent sensor orientationand similarrecognition acuracy,a novel gaitrecognition method basedon inertial sensorandAdaBoost algorithmisproposed.Firstofall,basedonthecale-spacetchique,robustgitdetectionmethodisproposedtoclasifyte signalinto motionsamples inordertocopewith the dramaticchanges inmotionspeedor intensity.Then,the position compensationcompensation algorithm isapliedtocorrect thetiltof thesensor,soasto solve theproblem thatthe sensor orientationisinconsistent.Finally,inordertoimprovetherecognitionaccuracy,themotioncharacteristicsareadaptively selected basedontheAdaBoostalgorithm,andthenthediscriminantanalysisisperformedtocompletetherecognition.Five similar gait motionrecognition experiments arecariedout,theresultsshowthat theproposedalgorithmhas highauracy.

Key words:gait recognition;inertial sensor;AdaBoost algorithm;scale space counting;positioning compensation matching algorithm

# 0 引言

随着无线通信技术的进步，各种微型传感器越来越多地被嵌入到可穿戴式和便携式电子设备中，如智能手机、平板电脑和智能手表等。通过惯性传感器对佩戴者的动作行为进行识别已经成为当前最具有吸引力的研究课题之一[1-4]。许多研究者已经在各种研究课题中采用可穿戴式传感器，如人机交互、驾驶分析、患者康复治疗和用户的日常生活监控等[5]。步态识别将来的发展方向是达到实时性，要求步态特征的表达尽可能的简单，各种传感器的使用给研究带来了极大便利。近年来，性别识别、年龄识别等扩展的步态识别也是重要的研究方向[]。

目前，该领域已经研究了各种具有不同复杂度的动作[7],如坐、站立、躺、行走、跑步、开车等。动作的各种特征，如它们的复杂度、周期性等，决定了传感器的最佳数量、位置和识别方法。该领域目前存在两个主要的困难：一个是动作信号的分割问题，另一个是训练阶段与测试阶段传感器连接不一致的问题。另外，在识别相似动作类时，现有方法的识别精度也不够高。动作信号分割即从动作中提取信号序列的过程，是实现动作分类的首要步骤[8-10]。然而，现有方法对动作信号的时间和强度变化是敏感的，例如当参与者改变他们的动作速度或方式时。当训练和测试阶段中的传感器位置或方向不同时，则会发生传感器连接不一致的问题。一些现有方法可以解决这个问题，但需要牺牲一些信号维度。现有的方法在相对不同的动作类上已经得到了评估[11-13]，但这不能保证他们可以在非常相似的动作类上工作良好。虽然一些作者用相似的动作类来评估他们的方法，例如步态动作，但效果都不理想。

针对现有方法在步态动作识别方面存在的动作信号分割、传感器方向不一致和相似动作类的识别精度不高等缺点，提出一种基于惯性传感器和Boosting方法的步态动作识别方法。提出的方法专注于相似步态动作类，以下是本文方法的几点创新来具体解决这几个问题：

a)采用尺度空间技术检测和分割阶跃信号，以此来应对动作速度或强度的剧烈变化造成的动作信号分割问题。

b)为了解决传感器方向不一致问题，首先采用一个陀螺仪用于传感器倾斜校正，然后应用定位补偿匹配算法来解决训练和测试信号序列之间的剩余相对传感器定位角。因此，所提出的方法不存在现有识别方法信息丢失问题。

c)利用AdaBoost算法自适应选取特征，加权处理，获得了较为精确的识别结果。

# 1 问题描述与技术难点

# 1.1问题描述

在实际应用中使用一个传感器(如智能手机)比使用多个传感器更加切合实际，且当传感器位于参与者腰部时，能够产生良好的步态动作效果。本文使用一个包括三轴加速度计和三轴陀螺仪的惯性传感器。

当参与者行走时，传感器在腰上的位置基本保持不变。因此对于在每个训练或测试中捕获的序列数据，惯性传感器的方向固定在连接位置的局部坐标系上。另一方面，定位在所有参与者和时间段中身体中心的人体坐标系系统中的传感器方向可能是不同的。仅使用一个步态周期可以识别一个动作，这是本文的问题设置中的动作样本。

通过考虑大型数据库中自然行走步态方式的先验知识，本文假设一个步态周期的持续时间在 $T _ { \mathrm { m i n } } = 7 0 0 m s$ 和之间。

# 1.2 动作信号分割

对于动作信号的分割，通常使用一个大小固定的滑动窗口。然而，一个固定大小的窗口有时会导致错误，因为它可能错误地分割一个动作或不能解决由于速度或用户差异所造成的动作的时间变化。目前已经提出了一些动态窗口来解决固定窗口的问题。这些方法根据信号强度的固定阈值或噪声以及信号分割理论检测到的信号时间来控制窗口的大小和位置。然而，当动作的信号强度也改变时动态窗口会失败。在进行步态动作识别时，检测一个步态周期(或连续两步的步态周期)来构建一个步态模式的方法，通常也被认为使用了动态窗口。然而，这些方法依赖于局部峰值和谷值检测，这对行走速度或行走方式的变化是敏感的。

# 1.3 步态周期检测

在基于惯性传感器识别的领域中，大部分现有方法试图检测步态周期作为步态原始状态，因为它们对步态信号的动态性比那些使用固定大小的滑动窗口效果更好。在这种情况下，步行是一个均匀和周期性的动作，因此有可能通过动态规划或用原始样本匹配检测到步态信号的周期。然而，在该领域中没有解决步态信号发生剧烈变化情况下的方法。如果强度、速度、传感器定位这些因素同时发生，问题就更加严重了。

# 1.4传感器连接不一致

现有的动作识别方法大多数都假设传感器固定在特定的方向或参与者的身体位置上。然而，将传感器固定在同一方向和固定位置是不切实际的，特别是在日常生活中，例如，裤兜里智能手机的传感器方向是有变化的。有多种方法可以解决传感器方向传感器位置不一致的问题。如无监督自适应、从数据或不同的传感器位置提取不变特征以及采用启发式知识等。解决传感器方向不一致的最普遍的方法是采用一维方向不变的信号，其他的研究人员试图使用一个方向不变的二维信号和一个三维步态加速信号来纠正传感器倾斜。然而，这些方法性能较低，会随着信号的维度降低而丢失有效信息。

目前存在一种校正传感器方向并使得信号的三个维度均可以使用的方法。然而，这种方法依赖于一个假设，即水平加速数据的第一主成分对应于前向(或后向)运动向量。然而，这个假设并不总是正确的，例如，当参与者轮流时会降低了该方法的鲁棒性。目前也存在一些可以消除成对加速信号序列之间的三维相对取向的方法。然而，这必须是对任何成对的类和探测信号序列，非常耗时且仅适用于小的数据库问题。在本文的研究中，提出的方法利用了陀螺仪，并通过在预处理阶段消除绝对中立向量来纠正传感器倾斜，再解决剩余的相对偏航角来解决三维定位问题。因此，在所提出的方法中解决传感器方向不一致方法在计算成本、鲁棒性和精度方面更具优势。本文算法结构框图如图1所示。

![](images/36cc3d14a87e1da450a0e6b60e4fd321fdae90f6fed0b52ddcfaf93aefa8aaac.jpg)  
图1本文算法的结构图

# 2 鲁棒的步态检测

# 2.1运动目标的步态周期

一个正常的步态周期由站立阶段和每个腿的摆动阶段组成这两个阶段的持续时间分别约为步态周期的 $60 \%$ 和 $40 \%$ 。一个人在正常行走时，当左腿处于站立阶段的开始阶段时左脚跟踩到地面，右脚也依然在地面上。碰撞力的强冲量从左脚传递到身体中心，导致身体中心的快速运动。同样的现象也会发生在右腿上的运动。因此，一个连接到参与者腰上的三维加速度计在脚跟离地(HST)时刻可以捕捉到双腿的一个强信号。在一个步态周期内，可以观察到两个这样的强信号。除了这两个HSTs，加速度信号都是平滑渐变的。另一方面，由于步态周期内直肌的能量消耗，在一个HST中可以观察到一个明显的能量峰，它比其他地方都低。内部的能量消耗可以通过外部在身体中心的力的大小观察到(以加速度幅度的形式)。步态的这些特点提示两个统计观测点：信号能量和局部峰/谷，本文在以下部分用来检测步态。

惯性传感器连接到一个参与者的后腰中间，其坐标系统与身体坐标系统相吻合，因此它可以捕捉上/下、左/右和前/后加速度，以及参与者的俯仰、偏航和滚转。然而，如果传感器坐标与身体坐标系统不吻合，可能会观察到一个不同的信号。这将导致如前面章节中描述的传感器方法不一致的问题。

# 2.2鲁棒的步态检测

从上面描述的步态加速度的特征来看，本文可以基于HST特征和其似然性的计算来检测和分割一个步态。

为了仅从三维加速度信号中计算HST的似然性，本文依赖于HST外观的两个发现。

a)加速度信号的能量比较高。

b)所有通道总局部特征点(如峰和谷)的密度比较高。

# 2.3基于信号能量的似然性

基于发现(1)的信号能量的似然行，本文将加速度信号的能量视为一个HST的似然行。计算在时间域和位置 $i \delta$ 处的能量$e ( i )$ 作为三维加速度信号的幅度 $e \big ( i \big ) = \Big \| s _ { a , i } \Big \|$ ，这是定位不变的合成信号。针对时空中的变量和噪声的鲁棒性，本文使用平滑参数 $\sigma _ { e }$ 的高斯滤波器 $f \left( x , \sigma _ { e } \right) = \frac { 1 } { \sqrt { 2 \pi { \sigma ^ { 2 } } _ { e } } } e ^ { - x ^ { 2 } / 2 { \sigma ^ { 2 } } _ { e } }$ e-−x²/2σ²。来计算不同平滑的信号能量 $\hat { e } _ { \sigma _ { e , i } }$ 。基于信号能量的 HST 的似然性计算如下：

$$
p ^ { e } \left( i \right) = \prod _ { \sigma _ { e } } \hat { e } _ { \sigma _ { e , i } }
$$

在具体实现过程中，因为每个步态周期内有两个大小不同的能量峰，本文设置 $\sigma _ { e } \in \left( T _ { \operatorname* { m i n } } / 4 , T _ { \operatorname* { m i n } } + T _ { \operatorname* { m a x } } / 8 , T _ { \operatorname* { m a x } } / 4 \right)$ ，事实上它可以在从 $T _ { \mathrm { m i n } }$ 到 $T _ { \mathrm { m a x } }$ 不同的步态周期上工作。如果$\sigma _ { e } < T _ { \mathrm { m i n } } / 4$ ，平滑的能量将包含许多峰和谷。如果 $\sigma _ { e } > T _ { \mathrm { m a x } } / 4$ ，平滑的能量将会更加平滑，因此不会改变似然性的质量。大量过平滑能量信号的积分不会提高能量似然性的质量，而会消耗更高的计算成本。在实验中，本文仅需要 $T _ { \mathrm { m i n } } / 4$ 和 $T _ { \mathrm { m a x } } / 4$ 中间的一个参数，即 $\left( T _ { \mathrm { m i n } } + T _ { \mathrm { m a x } } \right) / 8$ ，它在中间的步态检测中工作。当然，本文使用 $T _ { \mathrm { m i n } } / 4$ 和 $T _ { \mathrm { m a x } } / 4$ 之间的更多参数，但这更加耗时。

# 2.4基于特征密度的似然性

基于发现(2)，本文使用局部峰和一些噪声的位置，需要平滑的信号。然而，得到一个最佳的平滑信号是不可能的，且特征检测器不能从非HST特征中区分出HST。这时特征检测器可能面临的以下这些现象：

a)在平滑度的精细水平上(信号为弱平滑)，非HST特征多于有意义的HST特征。

b)在平滑度的粗糙水平上，检测到更少的非HST特征和更多的HST特征。而检测到特征的总数减少。

c)在平滑度非常粗糙的水平上，HST 和非 HST 特征均消失。

针对以上这些现象就需要使用尺度空间理念，当结合所有平滑度水平的检测结果时，在HST时刻特征(无论是HST和非HST)的密度为高，其他为低。

使用尺度空间理念的特征密度计算，首先要通过平滑参数$\sigma _ { f }$ 通过不同的滤波器 $f ( x , \sigma _ { f } )$ 使三维信号序列平滑。然后检测每个通道和每个平滑水平上的所有信号特征(峰和谷)。最后，根据在时间域 $\{ i _ { l } \delta \} ( l = 1 , . . . , N ^ { f } )$ 内所有检测到的特征位置(其中$N ^ { f }$ 是检测到特征的数量)，由核密度评估计算位置 $i$ 上特征的密度似然性函数 $p ^ { f } \left( i \right)$ ,计算公式如下：

$$
p ^ { f } \left( i \right) = \frac { 1 } { N ^ { f } b } \sum _ { l = 1 } ^ { N ^ { f } } K \left( \frac { \left( i - i _ { l } \right) \delta } { b } \right)
$$

其中: $K$ 是是用于评估的核函数， $\textit { b }$ 是 $\boldsymbol { K }$ 中使用的带宽或平滑参数。在本文的实现中，使用Epanechnikov 核和 $b$ 设置为一个步骤中最小持续时间的一半，即 $b = T _ { \mathrm { m i n } } / 4$ 。这个似然性密度函数用作另一个HST的似然性。本文在一个固定为50 毫秒的窗□内使用一个简单的局部最大值和最小值，来检测在传感器的采样周期为10毫秒时尖锐的峰和谷。平滑参数 $\sigma _ { f }$ 初始化为一个小值，如50 毫秒。通过逐步增加50毫秒到其以前的水平生成一个粗水平。当新检测到的数目小于一个阈值(例如，一个特征/秒/信号通道)时，就可以停止平滑和检测特征。

# 2.5 HST的联合似然性

考虑到发现1和发现2，HST的似然性 $\boldsymbol { p } _ { \scriptscriptstyle i }$ 计算为两个似然性 $p ^ { e } \left( i \right)$ 和 $p ^ { f } \left( i \right)$ 的点积：

$$
p _ { _ i } = p ^ { e } ( i ) p ^ { f } \left( i \right)
$$

因为HST应该包含对分类动作有意义的信息，来将信号分割为步态，以使HST位于分割步态的中心而不是分割的边界处。可以使用一些非线性信号匹配方法，如动态时间规整，将在序列边界匹配优化时牺牲一定量的信息。一个使用大小$T _ { \mathrm { m i n } } = 2$ 的滑动窗口的简单局部峰检测器可以用来检测HST 位置。为了便于说明， $p ( i )$ 的局部峰被认为是HST的近似位置。两个相邻局部峰之前的局部谷用作分割位置，然后通过所有的这些局部谷将步态分割。最后，一个动作识别样本就变成了两个连续步态构建的一个短信号序列。

对于传感器方向变化的鲁棒性，本文可以仅依赖所得到的信号计算HST基于特征的似然性。然而，所得到的信号的信息量有一个显著的丢失。因此，本文在计算基于特征密度的似然性时还包括三维定位独立信号。由于特征密度的统计观察不会改变任何传感器的定位，本文将通过实验证明这种定位依赖性在步态检测方面是微不足道的。

# 3 针对传感器方向不一致的信号匹配

根据1.4节，现有的动作识别方法基本上都是假设传感器固定在特定的方向或参与者身体的某一特定位置上。然而在日常生活中(例如，裤兜里智能手机的传感器方向是有变化的)。基于此，本文提出了可以用来解决传感器方向不一致(或传感器位置)问题的方法，通过在预处理步骤中消除绝对中立向量来纠正传感器倾斜，然后解决剩余的相对偏航角进行三维定位。

在深入讨论细节之前，首先介绍一些在本节中使用的相关信号的符号。一个步态周期的动作样本用${ \cal { S } } \mathrm { = } \big \langle \big ( s _ { a , i } ^ { T } , s _ { r , i } ^ { T } \big ) \big \rangle \big ( i \mathrm { = } 1 , . . . , N _ { s } \big )$ 来表示，其中 $S _ { a } = \left. s _ { a , i } \right.$ 和 $S _ { r } = \left. s _ { r , i } \right.$ 分别是 $s$ 的加速度和旋转速度信号。下标 $\mathbf { \Psi } _ { a }$ 和 $\boldsymbol { r }$ 分别表示加速度和旋转速度的数据。粗体大写字符(如 $s$ )代表一个6D信号序列；带下标的粗体大写字符(如 $S _ { a }$ 或 $S _ { r }$ )代表一个3D 信号序列的加速度或旋转向量；粗体小写字符(如 $s$ )代表一个3D(加速度或旋转向量)信号样本。

# 3.1预处理阶段的倾斜校正

对于一个步态周期的每个6D动作样本${ \cal { S } } \mathrm { = } \Big \langle \big ( s _ { a , i } ^ { T } , s _ { r , i } ^ { T } \big ) \Big \rangle \big ( i \mathrm { = } 1 , . . . , N _ { s } \big )$ ，本文建立一个固定的与第一帧中传感器坐标系一致的坐标系 $f _ { 0 }$ ，在该坐标系中计算第 $i$ 帧和第 $i$ 个加速度信号 $a _ { i }$ 的矩阵的旋转矩阵 $R _ { i }$ ：

$$
R _ { i } = \prod _ { j = 1 } ^ { i } R \big ( \delta s _ { r , j } \big )
$$

$$
a _ { i } = R _ { i } s _ { a , i }
$$

其中: $R \big ( \delta s _ { r , j } \big )$ 是旋转角 $\delta s _ { r , j }$ 的相对旋转矩阵。在世界坐标系中，重力加速度 $g = \left( 0 , - 1 , 0 \right) ^ { T }$ ，加速度向量 $a _ { i }$ 用 $a _ { _ i } ^ { \scriptscriptstyle W }$ 来表示：

$$
\boldsymbol { a } _ { _ i } ^ { \scriptscriptstyle W } = \boldsymbol { R } ^ { \scriptscriptstyle W } \boldsymbol { a } _ { _ i }
$$

$R ^ { \scriptscriptstyle { W } }$ 是一个描述坐标系转换的常数旋转矩阵。参与者的加速度$a _ { i } ^ { W , S }$ 可以去除重力加速度得到:

$$
a _ { i } ^ { W , S } = a _ { i } ^ { W } - g = R ^ { W } a _ { i } - g
$$

通过整合计算世界坐标系中参与者的向量 $\pi _ { i } ^ { w , s }$ ：

$$
\pi _ { i } ^ { W , S } = \pi _ { 0 } + \sum _ { j = 1 } ^ { i } \bigl ( R ^ { W } a _ { i } - g \bigr ) \delta
$$

其中: $\pi _ { 0 }$ 是世界坐标系中未知的初始线性向量。如果 $s$ 是理想的周期性步态周期， $\pi _ { 1 } ^ { W , S } = \pi _ { N _ { S } } ^ { W , S }$ ，且 $R ^ { * }$ 是未知的，然后整合：

$$
M _ { s } = \sum _ { j = 1 } ^ { N _ { s } } \bigl ( R ^ { W } a _ { i } - g \bigr ) \delta = 0
$$

因此， $\pi _ { 0 }$ 定义了参与者运行的方向。例如，如果参与者沿着楼梯向下或斜坡向下行走，向量 $\pi _ { 0 }$ 指向下；如果参与者沿着楼梯向上或斜坡向上行走，向量 $\pi _ { 0 }$ 指向上；如果参与者在平坦的地面上行走，向量 $\pi _ { 0 }$ 平行于地面。否则，如果 $R ^ { * }$ 是未知的，本文也可以基于式(11)的约束很容易找到它。

然而，实际上很难得到一个完美的步态周期 $s$ (如， $ { N _ { s } }$ 短于或者长于真实值，或参与者没有以固定速度行走)，且物理上$M _ { s } \neq 0$ 。本文用最小二乘法找到了 $R ^ { \scriptscriptstyle { W } }$ 的一个解决方案：

$$
\left( r ^ { * } , \pi _ { 0 } ^ { * } \right) = \arg \operatorname* { m i n } _ { r , \pi _ { 0 } } \sum _ { i = 1 } ^ { N _ { S } } \left( \pi _ { 0 } + \sum _ { j = 1 } ^ { 1 } \left( R \left( r \right) a _ { j } - g \right) \delta \right) ^ { 2 }
$$

$$
\tilde { R } ^ { w } = R \big ( r ^ { * } \big )
$$

其中: $\boldsymbol { r }$ 是俯仰、滚转和偏航向量， $R ( r )$ 是 $\boldsymbol { r }$ 的旋转矩阵。用旋转向量 $r _ { 0 }$ 初始化最小化，即 $R \big ( r _ { 0 } \big )$ 将 $M _ { s }$ 设置为0。给定 $\tilde { R } ^ { \scriptscriptstyle { w } }$ ，可以校正传感器的倾斜，然后步态周期信号：

$$
s _ { a , i } ^ { W } = \tilde { R } ^ { W } s _ { a , i } , s _ { r , i } ^ { W } = \tilde { R } ^ { W } s _ { r , i }
$$

由于在水平平面(垂直于重力)上没有参考信息，通过最小化的偏航角估计是不正确的，因此任意一对步态周期在它们相关的偏航角上都可能会有所不同。在式(7)中的最小化，本文将加速度和旋转速度合并，这可能会引入一些累积误差。然而，由于步态周期相对较短(如果传感器样本在 $1 0 0 \mathrm { H z }$ 时大约100个传感器读数)，累积误差是可以忽略不计的。

在接下来的章节中，不管何时本文提到一个步态周期，都假设在预处理步骤中已经完成了倾斜校正。

# 3.2定位补偿信号匹配

在这一节中，介绍了一个解决方案来匹配一堆图库动作样本 ${ G } { = } \Big \langle \big ( g _ { a , i } ^ { T } , g _ { r , i } ^ { T } \big ) ^ { T } \Big \rangle \big ( i { = } 1 , . . . , N _ { G } \big )$ 和测试动作样本,g)(i=1,..,Np)，其中N和Np分别是动作样本$G$ 和 $P$ 的信号样本数。如上所述，给定具有不同偏航角的这些信号序列不直接进行比较。

存在一个名为定位补偿信号匹配算法的迭代信号匹配方法它可以有效地在不降低信号维度的情况下解决传感器方向不一致的问题。该方法同时找到相对传感器定位 $\boldsymbol { R } ^ { * }$ 和信号对应关系${ C ^ { * } = \left\{ \left( { { i } _ { k } } , { { j } _ { k } } \right) \right\} \left( k = 1 , . . . , K \right) }$ 来最小化加速度信号序列 $G _ { \alpha } = \left. g _ { a , i } \right.$ （204号和 $P _ { a } = \left. p _ { a , j } \right.$ 之间的差异，其中 $\left( i _ { k } , j _ { k } \right)$ 分别是 $G _ { _ a }$ 和 $P _ { a }$ 的第 $i _ { \boldsymbol { k } }$ 个样本和第 $j _ { k }$ 个样本， $K$ 是对应关系对的数量。然后使用旋转矩阵 $\boldsymbol { R } ^ { * }$ 和信号对应关系 $c ^ { * }$ 分别计算 $G$ 和 $P$ 之间的加速度和旋转速度差异对 $\left( d _ { a } , d _ { r } \right)$ ，如下：

$$
d _ { u } \left( G _ { u } , P _ { u } ; C ^ { * } , R ^ { * } \right) = \sqrt { \frac { 1 } { K } { \sum _ { k = 1 } ^ { K } } \Bigl \| g _ { u , i _ { k } } - R ^ { * } } \mathbf { { \mathit { p } } } _ { u , j _ { k } } \Bigr \| ^ { 2 }
$$

其中: $u \in \left\{ a , r \right\}$ 代表加速度或旋转向量， $\left( i _ { k } , j _ { k } \right) \in C ^ { ^ { \ast } }$ 。

每对图库和测试动作样本均需要进行匹配，这需要大量的处理时间来对所有的图库样本匹配一个测试样本。由于信号已经倾斜校正，本文仅需要计算这些信号序列之间的偏航角 $\gamma$ ，以此降低匹配的计算成本。

# 4 基于AdaBoost算法的动作识别

现有方法识别相似动作时始终存在识别精度不高的缺点。基于此，本文利用AdaBoost算法自适应选取特征，加权处理，获得识别结果。步态识别作为一个新兴的研究领域，近几年备受关注。进行步态识别的关键是有效提取出准确的步态特征[4].

从而提高了最终的识别效率。区别于一般的识别方法，本文基于AdaBoost算法来自适应选取特征[15]，并通过加权处理来获得识别结果。

# 4.1关键帧提取

要进行关键帧的提取，首先应该对特征矢量实行降维处理。因为一帧图像特征矢量的维数通常数以百计，这是一个较大的数字，如果直接利用特征矢量进行识别，会有相当的计算量。在AdaBoost 算法中，首先会根据各训练样本能否被当前弱分类器(指那些分类能力较弱的分类器)进行正确分类，而设定一个相应的权值。为了达到预先设定的某个足够小的错误率，AdaBoost算法会持续加入弱分类器。每当加入新的分类器，在之后的迭代过程中，能够被正确分类的训练样本其权值就会被调低，反之则调高。这样就能保证在后续迭代过程中，被错误分类的训练样本会得到弱分类器的优先照顾。照此操作过程，经过训练得到的各个弱分类器就通过线性组合组成一个强分类器。根据AdaBoost算法的操作流程，本文利用该算法选择步态特征，通过AdaBoost算法的迭代处理提取出有效的步态特征便于判别分析，从而提高最终的识别精度。

通过训练不同参与者的序列而生成的6D动作样构建一个动作模板 $H : H = \{ h _ { i } \} ( i = 1 , \cdots , n )$ ，其中 $h _ { \scriptscriptstyle i }$ 是动作类 $i$ 的集合， $n$ 是类的数量。 $h _ { \scriptscriptstyle i }$ 可以分为分别对应加速度和旋转速度的两个子集h,和h,i。

给定 $( h _ { a , 1 } , h _ { r , 2 } ) , ( h _ { a , 2 } , h _ { r , 2 } ) , \cdots , ( h _ { a , l } , h _ { r , l } )$ 用于表示正反例样本。其中 $\left( x _ { i } , y _ { i } \right)$ 是第 $i$ 个图像块的样本，令 $1 \leq i \leq l , l$ 表示得到的样本的数，其取值可以为30，具体操作流程如下：

a)进行初始化，令 $\omega _ { 1 . i } = \frac { 1 } { 2 n } , \frac { 1 } { 2 m }$ 这两个值分别对应 $y _ { i } = 0 , 1$ ，式中 $\omega _ { 1 . i }$ 是第1次第 $i$ 个样本所对应的权值，而 $m \ 、 n$ 则表示正反例样本的数量。

b)Fo $r t = 1 T o T$

(a)针对特定的特征 $j$ ，可以用 $\omega _ { i }$ 来训练 $h _ { j }$ ，其中分类错误率 $\varepsilon _ { j } = \mathrm { P r } _ { t } [ h _ { j } ( x _ { t } ) \neq y _ { t } ] , \omega _ { t }$ 是第 $t$ 次样本所对应的权值。令$1 \leq j \leq n$ ，其中 $n$ 表示备选特征总数( $h _ { j }$ 是特征 $j$ 的弱分类假设，其中 $h _ { j }$ 可表示为 {1Pjfj(x)<Pjθ,，fj(x)表示特征值，θ;表示阈值， ${ \boldsymbol { p } } _ { j }$ 表示不等式方向的符号因子)。

(b) $\forall j \neq k , \varepsilon _ { k } < \varepsilon _ { j }$ ，且 $\mathcal { E } _ { t } = \mathcal { E } _ { k }$ 口

(c)更新 $\omega _ { t + 1 , i } = \omega _ { t , i } \beta _ { t } ^ { 1 - \varepsilon }$ ，用 $\varepsilon _ { i } = 0 , 1$ 表示对训练样本的错误划分或正确划分， $\beta _ { i } = - \frac { \varepsilon _ { t } } { 1 - \varepsilon _ { t } }$

c)经过以上步骤得到的的分类函数可表示为$h \big ( x \big ) = \sum _ { t = 1 } ^ { T } a _ { t } h _ { t } \big ( x \big ) \geq \frac { 1 } { 2 } \sum _ { t = 1 } ^ { T } a _ { t }$ ，其中 $a _ { t } = \log \frac { 1 } { \beta _ { t } }$ 。这样就得出了 $T$ 个特征以及 $T$ 个具有初始化特征的分类器。

# 4.2 识别处理

a)假设训练序列 $G 1 = G 1 _ { t } ^ { j } , i = 1 , 2 , \cdots , C , j = 1 , 2$ ；其中， $i$ 表示

第 $i$ 个人的训练样本， $j$ 则表示两脚分开最大、两脚靠近这两种步行状态；

b)对于所有 $G 1 = G 1 _ { t } ^ { j } , i = 1 , 2 , \cdots , C , j = 1$ ；利用Boosting 算法进行训练，提取出 $T$ 个特征。同时， $T$ 个初始化分类器构成—个对 $j = 1$ 进行识别的分类器 $Z _ { \scriptscriptstyle 1 }$ ,利用相同方法可以得到 $Z _ { _ 2 }$ ：

c)假设训练序列 $G 2 = G 2 _ { i } ^ { j } , i = 1 , 2 , \cdot \cdot \cdot , C , j = 1 , 2$ ；利用 $Z _ { 1 } , Z _ { 2 }$ 分别对G2 的两种状态识别，对最终结果分析得出准确率 $\varepsilon _ { 1 } , \varepsilon _ { 2 }$ ：

d)对于测试序列,利用 $Z _ { 1 } , Z _ { 2 }$ 分别获得测试结果 $\left( \delta _ { 1 } , \delta _ { 2 } \right)$ ，其中 $\delta _ { i } \in \left( 0 , 1 \right)$ ，则 $\eta = 0 . 5 * \varepsilon _ { 1 } * \delta _ { 1 } + 0 . 5 * \varepsilon _ { 2 } * \delta _ { 2 }$ ，其中 $0 . 5 * \varepsilon _ { i }$ 是权系数。当 $\eta > 0 . 5$ 时是正样本， $\eta \leq 0 . 5$ 时是负样本。

# 5 实验及分析

# 5.1实验设置

在本文的实验中，在参与者的腰部后面、左面和右面固定3个IMUZ传感器。以10毫秒的采样周期捕捉数据。传感器安装在腰带上，在腰带上覆盖一层柔软的垫子以保护传感器并且避免了传感器与参与者之间的接触。固定好之后，左边和右边传感器的方向设置为与中心IMUZ近似 $9 0 ^ { \circ }$ ，左边和右边传感器之间的传感器方向为 $1 8 0 ^ { \circ }$ ，即在参与者腰部左右两侧对应放置。在本文的例子中，注意到最大的方向差异与传感器之间最大的距离相对应。要求每个参与者在平坦的地面上行走、上楼梯、、下楼梯、上坡、下坡完成动作。

# 5.2 数据集

本文收集了200名15\~65岁参与者的数据，性别比例几乎相等。本文设置了两个实验数据集。第一个数据集包含由3个传感器捕获的200名参与者的整个数据库，将数据集随机分成两个分别包含100个参与者的子集作为训练和测试动作样本。在拍摄的同时手动分配中心IMUZ捕获的信号系列中的真实动作标签。因为三个IMUZ传感器很容易同步，因此左边和右边IMUZ的信号序列的动作标签也是分配好的。

# 5.3基准方法

本文将所提出的方法与四个最新的基准方法进行比较，各种基准方法总结如表1所示。第一个基准方法(BOF2012)[16]应用著名的特征袋模型，以用于识别的新编码字符串来表示惯性信号。第二个基准方法(SIIRTOLA2012)[17]使用加速度计和陀螺仪所得到的信号作为方向不变的信号以克服方向不一致的问题因为使用三维加速度或旋转速度信号的一维合成信号中丢失了大量重要的信息，第三个基准方法(APIWAT2011)[18]校正了预处理阶段的传感器方向。第四个基准方法(NGO2012)[19]是本文提出算法的初始版本；唯一的区别是，它并没有解决传感器方向不一致的问题。

# 5.4实验结果

对于每个IMUZ 传感器，本文有一个训练子集(用字母 $T$ 表示)和一个测试子集(用 $E$ 表示)。考虑到左边(L)、右边(R)和中心(C)IMUZ传感器的3个训练和3个测试子集，本文总共有9个组合，可以根据训练和测试子集之间的传感器方向差异被归类为： $0 ^ { \circ }$ 差异组合 $\{ ( L T , L E ) \} \setminus \{ ( C T , C E ) \}$ 和 $\{ ( R T , R E ) \} : 9 0 ^ { \circ } .$ 差异组合 $\{ ( L T , C E ) \} \setminus \{ ( R T , C E ) \} \setminus \{ ( C T , L E ) \}$ 和 $\{ ( C T , R E ) \} : 1 8 0 ^ { \circ }$ 差异组合 $\{ ( L T , R E ) \}$ 和 $\{ ( R T , L E ) \}$ 。

表1各种基准方法的总结  

<html><body><table><tr><td>方法</td><td>信号分割</td><td>传感器方向 是否鲁棒</td><td>信号维度和 额外的描述</td></tr><tr><td>BOF2012</td><td>通过穷举搜索的固 定窗口</td><td>否</td><td>6D</td></tr><tr><td>SIRTOLA2012</td><td>固定为1秒的窗口</td><td>是</td><td>2D 方向不变 的信号</td></tr><tr><td>APIWAT2011</td><td>固定为1秒的窗口</td><td>是</td><td>6D方向修正 的信号</td></tr><tr><td>NGO2012</td><td>鲁棒的步骤检测</td><td>否</td><td>6D</td></tr></table></body></html>

几种方法所有动作类的平均识别精度如图2所示。可以看到，SIIRTOLA2012 的性能对传感器方向不一致是鲁棒的，而NGO2012和BOF2012的性能随着传感器方向差异增大而降低。在相同的传感器配置( $0 ^ { \circ }$ 差异)，NGO2012的性能也是稍微差于提出的方法。APIWAT2011的性能与图2不同。原因是虽然APIWAT2011应用了传感器方向校正，它连接在参与者腰部不同位置的传感器的假设是不正确的。这是因为，同一个参与者身上不同方向传感器的加速度是不同的，因此是统计特性。相反，在任何传感器方向差异下，提出方法都具有较高的精确性和鲁棒性。

![](images/18ce732861c73e1df38d69be48d91096b8e17a2dec4c723584a492224793f90e.jpg)  
图2三个传感器组合的基准方法的统计性能结果

本文还给出了每个动作类的所有组合的平均精度，如图3所示。可以看到，对于所有的五个动作类，提出的方法都能准确和稳定地进行识别。

![](images/942f619e7b126b2d67dba2be9bebd57f92d0f869d46bc9b945a081c908a56a96.jpg)  
图35个动作类的平均识别精度

如图3所示，提出的方法在5个动作上都取得了最高的识别精度。表2给出了提出的方法的平均混淆矩阵 $( \% )$ 。从表中可以看出，上坡和下坡有时会与水平行走混淆。同时，上楼梯和下楼梯是五个步态动作中区分性最高的。

表2所提出方法的平均混淆矩阵 $( \% )$   

<html><body><table><tr><td rowspan="2">测试动作</td><td colspan="5">预测的动作</td></tr><tr><td>LW</td><td>UT</td><td>DT</td><td>UL</td><td>DL</td></tr><tr><td>水平行走(LW)</td><td>84.55</td><td>0.00</td><td>0.00</td><td>10.98</td><td>4.47</td></tr><tr><td>上楼梯(UT)</td><td>0.03</td><td>98.67</td><td>0.00</td><td>1.01</td><td>0.29</td></tr><tr><td>下楼梯(DT)</td><td>0.00</td><td>0.00</td><td>98.38</td><td>1.31</td><td>0.31</td></tr><tr><td>上坡(UL)</td><td>10.00</td><td>0.62</td><td>1.10</td><td>84.82</td><td>3.46</td></tr><tr><td>下坡(DL)</td><td>5.42</td><td>0.71</td><td>0.52</td><td>1.88</td><td>91.47</td></tr></table></body></html>

以上实验可以看出，所提出的方法可以克服参与者腰部周围传感器位移的问题。总体而言，针对各种传感器方向，提出的方法获得了最好的识别精度和鲁棒性。基本解决了现有方法在步态识别方面存在的动作信号分割、传感器方向不一致和相似动作识别精度不高等缺点。

# 6 结束语

本文提出了一个基于惯性传感器的相似步态动作的识别方法，其信号序列短于一个步态周期(大约1秒)。首先，基于尺度空间技术提出了一个鲁棒的步骤检测方法来将信号分为动作样本。即使动作的速度或强度发生很大变化时该方法也能正常工作。然后，本文提出了一种解决传感器方向不一致问题的具体方法。最后，本文基于AdaBoost算法实现自适应特征选取从而提高了识别精度。大量参与者在五个相似步态动作类(平坦的地面上行走、上楼梯、下楼梯、上坡和下坡)的使用验证了所提出的方法。

# 参考文献：

[1]张杰，吴剑章，汤嘉立，等．基于时空图像分割和交互区域检测的人体 动作识别方法[J].计算机应用研究,2017,34(1):302-305.   
[2]郑胤，陈权崎，章毓晋．深度学习及其在目标和行为识别中的新进展 [J].中国图象图形学报,2014,19(2):175-184.   
[3]张鑫．基于传感器数据的手臂动作识别与应用研究[D].哈尔滨：哈尔 滨工业大学,2016.   
[4]Wang J,Liu Z,Chorowski J,etal.Robust3D action recognition with random occupancy patterns [C]//Proc of European Conference on Computer Vision. Berlin: Springer,2012: 872-885.   
[5]陈国兴，刘作军，陈玲玲，等．假肢穿戴者跌倒预警系统设计[J]．华 中科技大学学报：自然科学版,2015,32(S1):246-251.   
[6]贲睨烨，徐森，王科俊．行人步态的特征表达以及识别综述[J].模式 识别与人工智能,2012,25(1):71-81.   
[7]徐海宁，陈恩庆，梁成武．三维动作识别时空特征提取方法[J].计算 机应用,2016,36(2):568-573.   
[8]秦磊，胡琼，黄庆明，等．基于特征点轨迹的动作识别[J]．计算机学 报，2014,42(6):1281-1288.   
[9]Lei Q,Li S Z,Zhang HB.Learning discriminative visual codebook for human action recognition [J]. Journal of Computers,2013,8 (12): 142-149.   
[10]王鑫，沃波海，管秋，等．基于流形学习的人体动作识别[J].中国图 象图形学报,2014,19(6):1088-1094.   
[11]王刘涛，王建玺，鲁书喜.基于AdaBoost 关键帧选择的多尺度人体动 作识别方法[J].重庆邮电大学学报：自然科学版,2015,27(4):549-555   
[12]徐海宁，陈恩庆，梁成武．三维动作识别时空特征提取方法[J].计算 机应用,2016,36(2):568-573.   
[13]侯静怡，刘翠微，吴心筱．基于隐任务学习的动作识别方法[J].北京 理工大学学报,2017,37(7):733-737.   
[14]李占利，崔磊磊，刘金瑄.基于协同表示的步态识别[J].计算机应用 研究,2016,33(9):2878-2880.   
[15] Kale A,Chowdhury AKR,Chellppa R. towardsa view invariant gait recognitionalgorithm[C]//Proc of IEEE Conference on Advanced Video & Signal Base.2003:143   
[16] Zhang M,Sawchuk AA.Motion primitive-based human activity recognition using a bag-of-features approach [C]//Proc of the 2nd ACM SIGHIT International Health Informatics Symposium.2012:631-640.   
[17] Siirtola P,Roning J.Recognizing human activities user-independently on smartphones based on accelerometer data [J]. International Journal of Interactive Multimedia,2012,1(5): 38-45.   
[18] Henpraserttae A, Thiemjarus S,Marukatat S.Accurate activity recognition using a mobile phone regardless of device orientation and location [C]//Proc of International Conference on Body Sensor Networks.2O11:41-46.   
[19] Ngo T T,Makihara Y,Nagahara H,et al. Inertial-sensor-based walking action recognition using robust step detection and inter-class rela-tionships [C]//Proc of the 21st International Conference on Pattern Recognition.2012: 3811-3814.