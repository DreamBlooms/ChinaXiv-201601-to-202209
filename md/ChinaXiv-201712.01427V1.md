# 混合现实技术在建筑工程中的应用研究

# 邵兆通 何兵初毅

（上海宝冶集团有限公司，上海200941）

【摘要】混合现实技术能够将虚拟物体与现实实体相互融合，该技术应用于建筑工程领域为设计师提供了全新的方案演示方式,本文从需求出发,探讨混合现实如何应用于建筑工程领域；通过开发测试,进行了建筑工程大空间下混合现实的关键技术研究，为混合现实技术的实际应用提供了需求和技术解决方案。

【关键词】混合现实；HoloLens；建筑；演示

【中图分类号】P642 【文献标识码】A 【文章编号】1674-7461(2017)03-0043-04  
【DOI】10.16670/j.cnki.cn11 -5823/tu.2017.03.07

# 1引言

2混合现实（Mixed Reality,简称 MR)是当前计算机研究的热门领域,人、计算机、实体环境结合在一起构成了混合现实的基础，它融合了计算机的环境感知能力，人与计算机的交互能力，并保留人与环境的传统现实。国内外多位学者进行了混合现实技术的研究：Milgram $\mathrm { P } ^ { [ 1 ] }$ 等首次阐明了MR 的概念，认为增强现实（AugmentReality）和虚拟现实（VirtualReality)均是混合现实的子集；黄进[² 对混合现实课题的人机交互方式做了综述，指出了与混合现实交互设计相关的原则与方法；陈保全[3]描述了混合现实中的虚实融合与人机智能交融的场景，指出未来混合现实中能够基于大数据引入机器智能；汤卓慧[4]探讨了当前MR系统的组成原理并分析了在轨道交通行业中的应用点；AllenJ5 介绍了一种协作空间远程交互系统的实现流程，在该系统中可以看到远程交互对象的全息影像，仿佛就在眼前，该技术在微软的Holoportation研发项目中有较好体现；Hassanin $\mathbf { M } ^ { [ 6 ] }$ 研究了一种面向云端的混合现实学习系统，描述了学习场景并对该系统做了有效评价。

当前工程方案演示技术出现了多元化：文字描述、二维图纸、效果图片、动画视频、漫游模型等，生动形象的演示技术逐渐在建设工程招投标中得到广泛的推广。采用混合现实技术将会精准、有效的传达投标人的投标方案，减轻理解难度并减少理解误差，进而提高中标率。本文将探讨混合现实技术在建设工程中的应用，为设计意图和施工工艺的有效表达提供参考。

# 2 研究思路

# 2.1 混合现实头显设备简介

混合现实按照与真实环境和数字环境的侧重点不同可分为虚拟现实和增强现实，如图1所示。VR 设备更侧重于数字现实，在虚拟世界里实现用户的沉浸式体验，代表产品主要有HTCVive、OculusRift和SonyPlaystationVR；AR设备较侧重于自然现实，通常在现实世界里附加文字、图片、模型等信息，代表产品主要有GoogleGlass,基于Tango 的联想Phab手机也可以实现AR体验，并具有运动跟踪、区域识别和深度知觉三大核心技术。

2017年5月，微软公司正式发售了MR全息眼镜Hololens。该设备支持目光、手势、语音、键盘和手柄的人机交互输入，可以实时空间建模、实时空间追踪、播放空间声音。Hololens 相对于其他设备的优势在于其本身就是一台计算机,集成了操作系统，具有环境感知相机和深度摄像头，大大增强了环境感知能力。除此之外，微软为HoloLens提供了便捷的开发环境与部署方式，本文中，我们采用HoloLens作为混合现实硬件设备。

![](images/b27a79ecf1922190cbf03f9c86d75e38a45f5f9127a2250f1a87a7336c8a1123.jpg)  
图1混合现实频谱图

# 2.2 工程应用需求分析

混合现实作为一项全新的表达方式，在工程中最直接、最受期待的应用当属方案演示。在工程投标过程中，业主与投标人同时佩戴全息眼镜，投标人将建筑的设计方案预先存储在眼镜中，在协同的环境下多方同时浏览建筑模型；施工单位在管线施前,将管线布置的多套方案集成在眼镜中,业主可以在管线模型中漫游，迅速确定最终方案。混合现实的全息影像也可以使不同构件按次序出现,实现对工程施工过程的模拟。在施工管理过程中，可以基于构件对工程项目进行注释，将施工过程的质量问题、安全问题、设计变更等信息注释在构件附近当相关人员佩戴眼镜靠近时可以发现标注的问题。由于隐蔽工程的特殊性,施工后一般不允许返工查看，为隐蔽实体的理解增加了负担，可以通过HoloLens可以实现查看隐蔽工程的功能。

# n3技术实现

# 3.1 方案演示

模型演示是HoloLens应用的基础功能，对于三维工程项目，我们需要实现的模型操作主要包括移动、旋转、缩放等。随着BIM技术的大力推广，多数建筑工程项目已经提前创建好Revit模型，可以将Revit模型经FBX中间格式导出到3dsmax，在3dsmax软件中修改材质和贴图后再通过FBX中间格式导出到Unity中，最后编译到HoloLens中实现三维模型的查看。混合现实中的方案演示首先要考虑的是大空间模型的定位问题：创建的虚拟模型如何和实体构件匹配。

(1)可以通过图像识别的方式对模型定位，在真实空间预先粘贴一张图像，将该图像存储在虚拟空间中，通过Vuforia开发平台识别并调整模型与图像的相对位置实现定位；

(2)可以通过HoloLens自身的定位功能加微调的方式进行定位，通过头部的转向确定模型方向，通过目光点控制模型的位置，对于大空间来说这种定位往往不能一次确定，需要辅助模型的微调命令实现定位功能。

MR技术能够轻松实现装配式建筑构件的爆炸模型演示。有较多单位设计装配式建筑时经常采用爆炸图，将原本安装在一起的混凝土构件拆解开查看，这种方式能够传达建筑中采用了哪种构件，有多少构件，但仍然是二维图片形式。可以通过HoloLens的开发实现爆炸模型演示，通过语音控制爆炸模型的拆解与装配。

# 3.2施工过程演示与属性查看

施工过程演示需要构件的施工日期信息，在Revit模型中添加共享参数信息可以添加该施工日期，如图2所示。

通过Revit二次开发可以导出属性(ID和时间)信息，在Unity中为构件设置ID编号，输入从Revit中导出的ID编号，程序自动调取对应的时间等属性信息。

![](images/2a35a682329d960e7e4f79dd8392877887eaeb0a7be8ea5260084623a3ca8df8.jpg)  
图2构件中添加日期信息

![](images/d3d507aa00fd5165857cea97b353105a6b50ffcbf37d18c4b094ac5cd0d4debc.jpg)  
图3构件时间属性的导出与匹配

Revit中的构件ID和时间属性导出后，就可以在Unity构件上定义Public变量实现构件与属性的索引,其中，时间属性实现Unity中构件呈现的先后循序，其他属性允许用户在施工现场点击相应构件查看。

# 3.3 步进式加载

由于硬件条件的限制，混合现实技术如今主要应用于小空间的演示，将小尺寸的工业设计方案放在地板上供多人查看。大空间游戏应用如Robo-raid，虽然扫描了用户所在的整个房间，也仅仅出现少量的虚拟物体，同时出现模型“漂移”现象。建筑工程现场的混合现实应用属于大空间的应用。随着BIM技术的推广，工程建设项目多存在Revit创建的BIM模型,该模型通过FBX格式导入到Unity后体量大、面数多，需要通过拆解模型的方式分步加载。可借鉴游戏地图动态加载方式,将二维地图更改为三维离散模型的加载。建筑工程模型空间一般通过楼层分割，在步进式加载方案下也通过楼层来分割模型。

![](images/f208aa5848906a983a77f855a0721c099b34347eb45c61397b191a4271b0e142.jpg)  
图4步进式加载原理

除了解决大模型加载的问题，步进式加载的另优势是实现多步定位，解决模型“漂移”现象。模型"漂移”的程度由用户运动路线上推移产生的累计误差所决定，用户运动路线越长，产生的模型漂移越严重。在一次测试中，从起点绕建筑空间环绕周回到起点，路径长约 $1 0 0 \mathrm { m }$ ，所产生的漂移误$8 0 \mathrm { c m }$ 。在不同房间里，设置不同的定位点，通过扫描预设图片将模型与工程实体进行多次自动定位，解决了以上问题。

# 3.4 多机互联

混合现实技术属于计算机领域的新技术，硬件设备价格较高，目前市场普及率较低。在传达设计师的设计创意时，如果不能实现多机互联，需要用户提前学会眼镜佩戴方式，操作手势，语音命令等，不能有效直接地传达设计意图。

可以将局域网下的多台MR设备联机，在协同状态下操作和查看模型。当前主流VR设备供用户漫游并不产生漂移的区域范围约为 $5 \mathrm { m }$ 正方形，微软HoloLens为用户在 $5 \mathrm { m }$ 以外区域设备追踪提供了新技术-空间锚点。HoloLens在扫描实体空间时创建多个空间锚点，当设备移动时，锚点做出相应变化进行准确调整，虚拟模型的位置与锚点相对位置保持固定，保证了远距离的头显设备追踪精度。通过设置服务器，将一台HoloLens扫描出的锚点传给另一台后，两台HoloLens具有相同的锚点即可实现多机互联，在大空间内多人漫游、操作。

# 4结论

在宝冶集团展示厅MR演示项目的开发实践中，对混合现实技术在建筑工程中的应用进行了一些思考,开发初期进行了较多技术测试,得出一些结论如下：

(1)混合现实技术提供的虚拟与实体交互技术非常有利于方案演示，设计师能够有效传达自己的设计创意，客户所见即所得，多机互联下的演示省去了客户学习设备操作的环节,使演示更直接；

（2）目前MR设备HoloLens尚存在一些硬件壁垒，内存不足、大模型显示出现延迟，通过分解模型后步进式载入来实现模型显示；硬件设备尚有一些难以解决的问题，如视场角度( $4 0 ^ { \circ } )$ 过小，导致用户的沉浸感不足；基于计算机视觉的定位追踪方式存在一定的误差。

MR技术在建筑工程领域的研究属于全新课题，可以结合其他设备继续研究，例如测量机器人、GPS等，充分利用各设备提供的精准数据为工程项目实施提供支持。

# 参考文献

[1]MilgramP,Kishino F.Ataxonomy ofmixed reality visualdisplays[J].IEICE Transaction on Information and Systems，1994，77(12)：1321-1329.  
[2］黄进，韩冬奇，陈毅能，等.混合现实中的人机交互综[J].计算机辅助设计与图形学学报，2016，28（6）：869-880.  
[3］陈宝权，秦学英.混合现实中的虚实融合与人机智能交融[J].中国科学：信息科学，2016，46（12)：1737-1747.  
[3］汤卓慧，朱培毅.虚拟现实、增强现实和混合现实及其在轨道交通行业的应用[J].铁路通信信号工程技术，2016，13(5):79-82.  
[4]Allen J,Simon P,Arturo S.A mixed reality telepresencesystem for collaborative space operation[J].Transactionson circuits and systems for video technology，2O17，27(4):814-827.  
[5]Hassanin M,AbdullahA.Toward cloud-based mixed real-ity e-learning system[J].2O17 International ConferenceonInformatics,Health& Technology，2017.

# Study on Mixed Reality Application in Construction Engineering

Shao Zhaotong，He Bing，Chu Yi (Shanghai Baoye Group Corp.，Ltd.，Shanghai 200941，China)

Abstract:Mixed reality can combine virtual world and real world，which provides designers a whole new way of demonstration once appied to construction engineering.Starting from demand，this paper discusses how mixed realitycan be applied to fieldofbuilding engineering；Through massive testing，keytechnologies of mixed reality in large space of construction engineering are studied.This research provides demand and technical solutions for he practical application of mixed reality technology in construction engineering.

Key Words:Mixed Reality；Hololens ；Architecture；Display

# 第十九届中国科协年会在长春隆重开幕

2017年6月24日,以"创新驱动、全面振兴"为主题的第十九届中国科协年会在北国春城吉林省长春市国际会议中心隆重开幕。中共中央政治局委员、国家副主席李源潮出席并讲话。全国政协副主席、中国科协主席、科技部部长、本届年会主席万钢致辞。吉林省委书记、省人大常委会主任巴音朝鲁致欢迎辞。开幕式由中国科协党组书记、常务副主席、书记处第一书记尚勇主持。吉林省委副书记、省长刘国中及国家有关部委领导同志，吉林省委、省政府有关领导同志，解放军有关方面负责同志，中国科学院院士、中国工程院院士等著名专家、学者，中国科协荣委、常委，来自科研、生产、教学第一线的科技工作者，新闻界朋友和国际友人，港澳和欧美、日本等21个国家和地区的专家、学者和科技组织代表出席开幕式。

本届年会是贯彻习近平总书记关于科技创新系列重要讲话精神,落实《科协系统深化改革实施方案》的一次科技盛会，也是全国科技界迎接党的十九大胜利召开的一次重要会议。本届年会主题为“创新驱动全面振兴”，由中国科协和吉林省人民政府共同主办。

为贯彻落实习近平总书记重要批示精神，在科技界树立创新争先的时代楷模，经中国科协、科技部研究，决定追授黄大年同志全国杰出科学家的荣誉称号。在此次年会开幕式上，黄大年同志生前工作单位代表、吉林大学地球探测科学与技术学院党委书记黄忠民从李源潮手中郑重接过“杰出科学家"证书。

开幕式上，中共中央政治局委员、国家副主席李源潮为王旭东等10 位第20届中国科协求是杰出青年成果转化奖获得者颁奖，全国政协副主席、中国科协主席、科技部部长、本届年会主席万钢为孙江生等15位第20届中国科协求是杰出青年实用工程奖获得者颁奖。

前不久，吉林省被批准为中国科协创新驱动助力工程示范试点省。在此次年会开幕式上，全国政协副主席、中国科协主席、科技部部长、本届年会主席万钢与吉林省委副书记、省长刘国中同志为“创新驱动助力工程示范试点省”揭牌。

开幕式结束后举行了大会特邀报告会，报告会由中国科协副主席、学术与学会专委会主任李静海院士主持。第十二届全国政协常委、中国发明协会理事长潘云鹤院士，中国科协常委、中国中医科学院常务副院长黄璐琦院士，中国环境科学学会副理事长、清华大学环境学院院长贺克斌院士，国际药用菌学会理事长、中国菌类学会名誉理事长李玉院士分别作了《中国人工智能2.0》、《贯彻落实中医药法，走出中医药创新之路》《我国中长期细颗粒物污染防治：排放与观测研究的启示》、《走有中国特色的菇业发展道路，实现食用菌产业的强国梦》为主题的特邀报告。

本届分为“会、展、赛、服"四个板块，共2500余人参加。6月25日举行了吉林省党政领导与院士专家座谈会。6月23日～26日举行了前沿交叉学术交流会、吉林省科技创新成果展示与对接会、先进材料创新展览会、海外人才创新创业项目大赛、创新驱动助力老工业基地行动、中国科协主席与吉林大学生见面会、高端智库咨询服务行动、科普中国服务吉林行动、求是杰出青年奖获奖者座谈会、中国科协海智计划联席会议等活动。

本届科协年会学术交流工作紧紧围绕学科发展中的前沿交叉问题、吉林省经济社会发展重点关注的科学问题进行交流和探头，共设12 个学术交流分会场，其中生命科学学会联合体、军民融合学会联合体、清洁能源学会联合体、信息科技学会联合体、智能制造学会联合体等5家联合体首次在年会上集体亮相，各承办1个分会场，12个分会场参与学会共计57家。邀请近200位两院院士、国医大师与会交流。

中国图学学会作为中国科协信息科技学会联合体成员，出席了本届科协年会，并参与承办了6月25日的前沿交叉学术交流会第四分会场——“信息新技术，东北新工业"论坛。本次论坛由中国科学院长春光学精密机械与物理研究所协办。中国图学学会主办的国家一级期刊《土木建筑工程信息技术》推荐关于企业信息化发展、BIM技术研究与应用的相关优秀论文编撰在本届科协年会论文集中。

本届年会得到广大科技工作者的积极响应，参与投稿人数超过2300 人,经同行评议,共录用学术论文683篇，由中国科协组织编辑论文集。

与会专家学者密切围绕年会主题，结合吉林省相关领域的关键问题深人开展交流研讨，加强科技供给，努力服务吉林省经济社会发展，以优异的成绩迎接党的十九大胜利召开。

（中国图学学会土木工程图学学会、《土木建筑工程信息技术》编辑部报道)