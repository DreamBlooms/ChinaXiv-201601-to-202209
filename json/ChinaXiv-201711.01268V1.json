[
    {
        "type": "text",
        "text": "卫星双模授时设备的关键技术实现",
        "text_level": 1,
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "蔡凡」，陈丽²",
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "（1．南京晓庄学院，南京211171；2.中国科学院上海天文台，上海200030）",
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "摘要：通过分析全球定位系统授时的缺点和北斗卫星导航系统进行授时的可行性，提出了卫星双模授时结合多时钟源的授时设备的设计方法，对授时设备中涉及的完好性监测算法和守时算法进行了研究，并给出详细的分析过程。",
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "关键词：全球定位系统；北斗卫星导航系统；卫星授时；完好性监测；守时算法中图分类号：TN965.5 文献标识码：A 文章编号：1672-7673",
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "",
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "时间作为一个基本测量物理量，不仅对人们的日常生活和基础科学领域有重要作用，而且对国防和国民经济建设也有十分重要的意义。作为基础保障平台之一的高精度时间基准能够有效提高系统或设备的稳定性。",
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "卫星授时接收设备及应用是一项解决我国基础授时通讯设施的重要项目，它增强了时间同步技术的可靠性，促进了我国自主知识产权的北斗卫星导航系统的应用。目前，全球定位系统接收机在我国的市场占有率很大，而北斗系统的主要用户主要是国家机关和大型企业。随着北斗系统的发展，其用户范围会越来越广，开发北斗和全球定位系统双模卫星授时接收机，有利于扩大我国自主研发北斗系统的国内市场，摆脱全球定位系统的重重束缚[1]。全球定位系统是由美国军方控制的军民共用系统，虽然现在对全世界开放，但是并未承诺我国可以无限期免费使用，这存在重大的安全隐患，一旦全球定位系统的卫星导航系统不能正常工作或者发生战争美国调整甚至关闭全球定位系统信号，将给我国带来巨大的影响[2]。",
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "目前我国的卫星授时方式主要利用全球定位系统授时获取标准时间，但是全球定位系统授时存在手段单一、没有自主控制权等问题，不仅短期稳定性差，而且安全性不强[3]。卫星双模授时设备采用了多时钟源自适应同步技术，北斗卫星导航系统、全球定位系统和外部",
        "page_idx": 0
    },
    {
        "type": "text",
        "text": "IRIG-B码互为设备的时间同步系统。选用高稳恒温晶体振荡器作为本地时钟，实现高精度守时，保证了北斗和全球定位系统双模同步系统的可靠性和稳定性。通过全球定位系统授时模块、北斗授时模块和外部输入的IRIG-B码，得到标准的时间信息协调世界时和秒脉冲信号，并对本地晶振的频率进行校正，生成符合时间同步要求的各种授时方式[4]。",
        "page_idx": 1
    },
    {
        "type": "text",
        "text": "本文针对卫星双模授时的关键技术展开讨论，主要涉及信号的完好性检测、本地守时、秒脉冲信号生成等相关技术。",
        "page_idx": 1
    },
    {
        "type": "text",
        "text": "1总体架构",
        "text_level": 1,
        "page_idx": 1
    },
    {
        "type": "text",
        "text": "卫星双模授时机的硬件总体架构如图1，主要含有导航模块、守时模块、串口输出模块、NTP 输出模块、秒脉冲输出模块、B 码输出模块、电源模块、显控模块、网管模块。主机内的各模块采用总线方式通信，信号通过母板进行传输。导航模块中卫星OEM单元输出时间信息和1PPS信号给守时模块中的守时跟踪单元，守时跟踪单元中的本地晶振在锁定卫星信号后对用户机内其他模块输出1PPS 信号和10MHz 信号，同时根据1PPS 信号和10MHz信号产生设备所需的各种对外输出信号，通过总线传送给相关模块。",
        "page_idx": 1
    },
    {
        "type": "text",
        "text": "串口输出模块、NTP 输出模块、秒脉冲输出模块、B 码输出模块都完成信号的对外输出，根据不同的要求输出不同形式的时间信号或信息。显控模块负责人机界面操作以及定时应用处理。电源模块负责给模块提供直流电源。网管模块完成模块间信息的调度以及远程监控功能，同时能够输出相关信息。",
        "page_idx": 1
    },
    {
        "type": "text",
        "text": "ChinaXiv合作期刊",
        "text_level": 1,
        "page_idx": 2
    },
    {
        "type": "image",
        "img_path": "images/f7c224a1394203218789f8780cf3333e9428f41f25e9f33385b9f2453e59026e.jpg",
        "img_caption": [
            "图1卫星双模授时机的硬件组成框图",
            "Fig.1 Diagram of satellite Dual-mode Time Service Hardware "
        ],
        "img_footnote": [],
        "page_idx": 2
    },
    {
        "type": "text",
        "text": "守时模块的硬件由现场可编程门阵列及外围电路组成，在现场可编程门阵列和单片机中运行相关守时及授时算法，即设备的软件程序。根据算法的总体架构，运行守时及授时算法的软件程序分为分频单元、信号生成单元、B码（DC和AC）编码单元以及串口通信单元。信号生成单元包含3个子单元，即信号完好性检测子单元、守时子单元和秒脉冲生成子单元。在软件程序中上述单元串接成一个整体程序进行工作，同时需要考虑诸多因素（比如导航模块的工作状态判别等），因此需要详细设计软件的总体运行架构。图2为软件程序的总体框图。",
        "page_idx": 2
    },
    {
        "type": "image",
        "img_path": "images/c35d946ee02f5a6321e604577cc2c5f52b75d94b7145f261965b39c040d8059e.jpg",
        "img_caption": [
            "图2 软件程序流程图",
            "Fig.2 Flow chart of Software program "
        ],
        "img_footnote": [],
        "page_idx": 3
    },
    {
        "type": "text",
        "text": "软件程序按照以下步骤运行。",
        "page_idx": 3
    },
    {
        "type": "text",
        "text": "（1）设备上电后，即启动信号完好性检测子单元和分频单元。判断导航模块是否正常工作的方法为：连续比较3个（也可以多个）1PPS信号的间隔是否正常。如果正确，则判断导航模块硬件正常工作，输出标志位，默认使用全球定位系统的1PPS信号作为外部守时信号。如果不正常，则继续检测导航模块，直到正常为止。分频单元含有整个现场可编程门阵列程序的时钟生成程序，通过现场可编程门阵列内置的锁相环和计数分频相结合的方式生成整个现场可编程门阵列程序所需的时钟。",
        "page_idx": 3
    },
    {
        "type": "text",
        "text": "（2）一旦导航模块正常工作，则运行守时子单元。卫星导航芯片1PPS信号送入守",
        "page_idx": 3
    },
    {
        "type": "text",
        "text": "时子单元完成对OCXO的驯服；",
        "text_level": 1,
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "（3）秒脉冲生成子单元则根据守时子单元输出的信号产生用于生成后续B码（DC和AC）编码单元和串口通信单元所需的1PPS秒脉冲信号；",
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "（4）在B码（DC）编码单元中，根据本地生成的1PPS信号发起中断，将全球定位系统或者北斗导航系统导航芯片输出的时间信息转换为B（DC）码信息。在B码（AC）编码单元中，根据本地生成的1PPS信号发起中断，将全球定位系统或者北斗导航系统导航芯片输出的时间信息转换为B（AC）码信息；",
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "（5）在串口通信单元中，通过串口输出通信信息、卫星信息以及时码信息。",
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "本文重点论述上述子单元涉及的信号完好性检测算法和守时算法。",
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "2信号的完好性检测 ",
        "text_level": 1,
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "信号完好性检测子单元负责对导航芯片的输出信号进行验证，以保证得到的1PPS和时间信息正确、稳定和有效。由图2可知，信号完好性检测子单元是后续守时子单元、秒脉冲生成子单元、B码（DC和AC）编码单元以及串口通信单元正常运行的前提和基础。",
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "信号完好性检测子单元验证导航芯片输出的信号是否正常的方法为：连续比较导航芯片输出的3个1PPS 信号的间隔是否正常。如果正确，则判断导航芯片为正常工作状态，输出标志位。如果不正常，则继续检测导航芯片，直到正常为止。设备中会有 3种守时状态，第1种是全球定位系统或者北斗导航系统都正常时的守时状态，不同的守时状态使用不同的外部时钟源以保证设备守时的稳定性。整个守时状态切换的流程如图3。",
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "（1）开机后全球定位系统或者北斗导航系统导航芯片开始运行，分别对这两个芯片产生的1PPS 信号持续进行检测。",
        "page_idx": 4
    },
    {
        "type": "text",
        "text": "（2）若全球定位系统或者北斗导航系统导航芯片的1PPS 信号均通过检测，则判断全球定位系统或者北斗导航系统导航芯片模块均正常工作，进入守时状态1，将全球定位系统信号作为守时参考信号而北斗导航系统信号作为备用守时信号。若只有全球定位系统芯片的1PPS信号通过检测，则判断全球定位系统芯片正常而北斗导航系统芯片不正常，此时进入守时状态2，将全球定位系统信号作为守时参考信号。若只有北斗导航系统芯片的1PPS 信号通过检测，则判断北斗导航系统芯片信号正常而全球定位系统芯片信号不正常，此时进入守时状态3，将北斗导航系统信号作为守时参考信号。",
        "page_idx": 5
    },
    {
        "type": "text",
        "text": "（3）进入守时状态1以后，若全球定位系统和北斗导航系统信号一直存在，即使接收到外部卫星切换指令，仍由全球定位系统信号作为守时参考信号。若同时丢失全球定位系统和北斗导航系统的卫星信号，则直接进入内部守时状态。若只丢失北斗导航系统信号，则进入守时状态2，此时继续采用全球定位系统信号作为守时参考信号。若此时丢失全球定位系统信号，则同样进入内部守时状态；若再次接收到北斗导航系统信号，则再次进入守时状态1。若只丢失全球定位系统信号，则进入守时状态3，此时只能采用北斗导航系统信号作为守时参考信号。若此时丢失北斗导航系统信号，则进入内部守时状态，而若再次接收到全球定位系统信号，则再次进入守时状态1。",
        "page_idx": 5
    },
    {
        "type": "text",
        "text": "（4）进入守时状态2以后，采用全球定位系统信号作为守时参考信号。若接收到北斗导航系统信号，则进入守时状态1；若丢失了全球定位系统信号，则进入内部守时状态。",
        "page_idx": 5
    },
    {
        "type": "text",
        "text": "（5）进入守时状态3以后，采用北斗导航系统信号作为守时参考信号。若接收到全球定位系统信号，则进入守时状态1；若丢失了北斗导航系统信号，则进入内部守时状态。",
        "page_idx": 5
    },
    {
        "type": "text",
        "text": "（6）若处于内部守时状态，若同时接收到全球定位系统和北斗导航系统芯片的IPPS信号，则进入守时状态1；若只接收到全球定位系统芯片的1PPS 信号，则进入守时状态2；若只接收到北斗导航系统芯片的1PPS信号，则进入守时状态3。",
        "page_idx": 5
    },
    {
        "type": "image",
        "img_path": "images/6c111356f01cacdcd3a8c1d7cd08e4d3cc2890baebb75a3804071d067970144d.jpg",
        "img_caption": [
            "图3守时状态切换流程图",
            "Fig.3 Flow chart of Punctuality Switching "
        ],
        "img_footnote": [],
        "page_idx": 6
    },
    {
        "type": "text",
        "text": "3守时技术",
        "text_level": 1,
        "page_idx": 7
    },
    {
        "type": "image",
        "img_path": "images/a074dc5813bbb0fa557ec33871d46ab5d3751dd3b36fd8c5490a100eb159d558.jpg",
        "img_caption": [
            "图4守时模块的硬件组成框图",
            "Fig.4 Diagram of punctuality module Hardware "
        ],
        "img_footnote": [],
        "page_idx": 7
    },
    {
        "type": "text",
        "text": "双模卫星授时机中守时模块的主要硬件组成如图4，守时模块主要由卫星导航芯片、时钟处理芯片、DA转换器和恒温晶体振荡器（Oven Controlled Crystal Oscillator,OCXO）组成。卫星导航芯片用于接收卫星导航芯片的秒脉冲信号和时间信息，时钟处理芯片用于将导航芯片的1PPS信号的时钟误差送入单片机，再将这些数据通过单片机处理后控制DA转换器对恒温晶振进行修正。守时模块确保完成守时子单元软件的运行。",
        "page_idx": 7
    },
    {
        "type": "text",
        "text": "守时子单元软件的流程为通过与导航芯片输出的1PPS信号进行比较，产生比该信号提前80ms的晶振1PPS信号，同时每128s将导航芯片的1PPS信号与晶振1PPS信号的平均时钟误差送入单片机，再将这些数据通过单片机程序处理后控制DA转换器对恒温晶体振荡器进行修正，从而完成对恒温晶体振荡器的驯服，获得高稳定度和高准确度的频率。",
        "page_idx": 7
    },
    {
        "type": "text",
        "text": "整个守时子单元程序分为现场可编程门阵列程序和单片机程序两部分，现场可编程门阵列程序主要包括时钟处理部分以及数据通信部分。时钟处理部分主要负责测量单片机控制DA转换器所需的平均时钟误差即由于导航芯片信号的抖动、晶振老化漂移以及晶振不准而产生的误差。单片机程序主要包括误差控制部分。守时子单元程序的运行过程如下：",
        "page_idx": 7
    },
    {
        "type": "text",
        "text": "",
        "page_idx": 8
    },
    {
        "type": "text",
        "text": "（1）首先分别接收全球定位系统和北斗导航系统导航芯片的1PPS信号，分别产生一个比全球定位系统导航芯片和北斗导航系统导航芯片1PPS信号提前 $8 0 \\mathrm { m s }$ 的1PPS（全球定位系统与晶振之间）信号和1PPS（北斗导航系统与晶振之间）信号，程序采用100MHz的基准时钟;",
        "page_idx": 8
    },
    {
        "type": "text",
        "text": "（2）连续存储两组相邻128秒全球定位系统导航芯片1PPS信号与1PPS（全球定位系统与晶振之间）信号的时钟误差和BDS导航芯片1PPS信号与1PPS（北斗导航系统与晶振之间）信号的时钟误差，并分别计算得到相隔128s的全球定位系统时间信号和本地晶振平均时钟误差及北斗导航系统时间信号和本地晶振平均时钟误差。最后，若处于守时状态1和守时状态2，则通过串口根据约定的帧协议将全球定位系统和本地晶振平均时钟误差送入单片机；若处于守时状态3，则将北斗导航系统时间信号和本地晶振平均时钟误差送入单片机；若处于内部守时状态，则需要将上一次的全球定位系统时间信号和本地晶振平均时钟误差通过串口发送到单片机。",
        "page_idx": 8
    },
    {
        "type": "text",
        "text": "（3)单片机根据现场可编程门阵列发送的误差值通过DA转换器输出电压对恒温晶体振荡器晶振的频率进行调整，从而完成对恒温晶体振荡器的驯服。",
        "page_idx": 8
    },
    {
        "type": "text",
        "text": "4结论",
        "text_level": 1,
        "page_idx": 8
    },
    {
        "type": "text",
        "text": "本文所述的相关处理算法已经在卫星双模设备中得到实际应用。完好性检测算法确保了设备在多种卫星授时环境下的正常工作，守时算法则保证了设备的长期稳定度能够和卫星授时保持一致。应用多模授时设备不仅可以满足系统对时间同步的更高要求，而且其输入、输出、电源等均可灵活配置，并具有丰富的各类模块及板卡供选择。时信号的种类和数量都可根据需要灵活选择配置，外部多个授时系统相互兼容、相互备份。当某一系统陷入瘫疾，接收机可以依靠其他系统正常工作，从而提高整个授时设备的可靠性，改变各行业中的授时设备过分依赖单一系统的现状[5]。",
        "page_idx": 8
    },
    {
        "type": "text",
        "text": "参考文献",
        "text_level": 1,
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "[1] 刑薇.卫星授时接收机与测试系统的研究[D].长沙：湖南大学，2011.",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "[2] 高新玉，张继宏，张远超.北斗多模卫星导航在电力系统中同步授时研究[J].电脑知识与技术，2014，10(16):3929-3932.",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "Gao Xinyu, Zhang Jihong, Zhang Yuanchao. Beidou satellite navigation and multi-mode timing synchronization in power system studies[J]. Computer Knowledge and Technology， 2014, 10(16) :3929-3932. ",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "[3] 陈孟元，凌有铸，王冠凌.北斗卫星导航系统与GPS互备的广播电视授时单元[J].电视技术,2010,34(6) :60-63.",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "Chen Mengyuan, Ling Youzhu, Wang Guanling. Broadcast television time service unit using mutually backup synchronization signals from Beidou satellite navigation and Global Positioning System[J].Video Engineering, 2010.34(6):60-63. ",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "[4] 郭彬.基于北斗GPS双模授时的电力系统时间同步技术研究[D].长沙：湖南大学，2010.  \n[5] 聂建慧.双模导航接收机精密授时系统的设计与实现[D].北方工业大学，2014.",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "Realization of key technology of dual mode satellite timing equipment ",
        "text_level": 1,
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "Cai Fan1, Chen Li², ",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "(1. NanJing XiaoZhuang University， Nanjing 211171; 2. Shanghai Astronomical Observatory, Shanghai 200030) ",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "Abstract: Through the application of the disadvantages of GPS timing and the analysis of the ",
        "page_idx": 9
    },
    {
        "type": "text",
        "text": "feasibility of BD satellite navigation system, this paper proposes the design method of the dual-mode satellite timing. The timing equipment involved in the integrity monitor algorithm and punctual algorithm. The detailed analysis about two algorithms is given. ",
        "page_idx": 10
    },
    {
        "type": "text",
        "text": "Keyword: GPS； BDS； satellite timing； integrity monitor； punctual algorithm",
        "page_idx": 10
    }
]